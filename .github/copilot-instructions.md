# ุชุนูููุงุช ุงูุจุฑูุฌุฉ ุงูุฐููุฉ - ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅูุชุงุฌ ุงูุญุฏูุซ

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุจููุฉ ุงููุนูุงุฑูุฉ

ูุฐุง **ูุธุงู ุฅุฏุงุฑุฉ ุฅูุชุงุฌ (MPS)** ูุชุตููุน ุงูุฃููุงุณ ุงูุจูุงุณุชูููุฉ ูุน ุฏุนู ุซูุงุฆู ุงููุบุฉ (ุนุฑุจู/ุฅูุฌููุฒู). ูุชุจุน ุงููุธุงู **ุจููุฉ TypeScript ูุงููุฉ** ูุน ูููุฏ ุตุงุฑูุฉ ูุณูุงูุฉ ุงูุจูุงูุงุช.

### ุงูุชูููุงุช ุงูุฃุณุงุณูุฉ
- **ุงููุงุฌูุฉ ุงูุฃูุงููุฉ**: React + Vite + Wouter (routing) + TanStack Query + Tailwind/Radix UI
- **ุงููุงุฌูุฉ ุงูุฎูููุฉ**: Express.js + Drizzle ORM + Neon PostgreSQL
- **ุงูุจูุงุก**: ูุดุฑูุน ESM-only ูุน Vite ููุนููู ู esbuild ููุฎุงุฏู
- **ุงููุตุงุฏูุฉ**: ูุจููุฉ ุนูู ุงูุฌูุณุงุช ูุน express-session + PostgreSQL store

## ููุทู ุงูุนูู ุงูุญุฑุฌ

### ูููุฏ ุณูุฑ ุงูุนูู ุงูุฅูุชุงุฌู
ููุฑุถ ุงููุธุงู **ูููุฏ ูููุฉ ุตุงุฑูุฉ** ุนุจุฑ ุฎุท ุงูุฅูุชุงุฌ:

```typescript
// ุญุฑุฌ: ูุฐู ุงููููุฏ ูุทุจูุฉ ุนูู ูุณุชูู ุงููุฎุทุท (shared/schema.ts)
// ุฃ) ููุฏ ุงูุทูุจ-ุงูุฅูุชุงุฌ: โ(ProductionOrder.quantity_kg) โค Order.total_quantity + tolerance
// ุจ) ููุฏ ุงูุฅูุชุงุฌ-ุงูููุฉ: โ(Roll.weight_kg) โค ProductionOrder.final_quantity_kg + tolerance  
// ุฌ) ุงููุฎุฒูู: current_stock โฅ 0 ูู ุฌููุน ุงูุฃููุงุช
```

**ุชุฏูู ุงูุญุงูุฉ**: `ุงูุทูุจุงุช โ ุฃูุงูุฑ ุงูุฅูุชุงุฌ โ ุงูููุงุฆู โ (ุงููููู โ ุงูุทุจุงุนุฉ โ ุงููุทุน โ ููุชูู)`

ุฌููุน ุงูุนูููุงุช ุงููุชุนููุฉ ุจุงููููุฉ ูุฌุจ ุฃู ุชุณุชุฎุฏู middleware ุงููุนุงููุงุช ูุงูุชุญูู ูู `server/middleware/transaction.ts` ู `server/services/data-validator.ts`.

## ุณูุฑ ุงูุนูู ุงูุชุทููุฑู

### ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ (ูุง ุญุงุฌุฉ ูู npm install ูู dev container)
npm run db:push          # ุฏูุน ุชุบููุฑุงุช ุงููุฎุทุท ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run dev             # ุจุฏุก ุงูุชุทููุฑ (tsx + vite ุจุงูุชูุงุฒู)
npm run build           # ุจูุงุก ุงูุฅูุชุงุฌ (vite + esbuild)
npm test                # ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุณูุงูุฉ ุงูุจูุงูุงุช
```

### ุญู ุงููุณุงุฑุงุช (ุญุฑุฌ)
ุงุณุชุฎุฏู ุฏุงุฆูุงู ุงูุฃุณูุงุก ุงููุณุชุนุงุฑุฉ ุงูููููุฉ:
- `@/` โ `client/src/`
- `@shared/` โ `shared/`
- `@assets/` โ `attached_assets/`

## ุฃููุงุท ุฎุงุตุฉ ุจุงููุดุฑูุน

### ูููู ูุณุงุฑุงุช API
ุงููุณุงุฑุงุช ุชุชุจุน ุชุณููุฉ ุงููุฌุงู ุงูุชุฌุงุฑู ุงูุนุฑุจู ูู `server/routes.ts` (6000+ ุณุทุฑ):
```typescript
// ุงูููุท: ููุงุท ููุงูุฉ ุฎุงุตุฉ ุจุงููุฌุงู ูุน ุณูุงู ุนุฑุจู
app.get("/api/orders", requirePermission("orders_read"), ...)
app.post("/api/production", requirePermission("production_write"), ...)
```

### ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุญูู
ูุณุชุฎุฏู **ุชูุงูู Drizzle-Zod** ููุชุญูู ุงูุขูู ูู ุงูููุน:
```typescript
// ุงูููุท: ุงูุชุญูู ุงููุจูู ุนูู ุงููุฎุทุท ูู shared/schema.ts
const insertOrderSchema = createInsertSchema(orders).extend({
  quantity_kg: z.number().positive()
});
```

### ุงููุตุงุฏูุฉ/ุงูุชุฎููู
- ูุตุงุฏูุฉ ูุจููุฉ ุนูู ุงูุฌูุณุงุช ูุน ุชุฎุฒูู PostgreSQL
- ุตูุงุญูุงุช ูุจููุฉ ุนูู ุงูุฃุฏูุงุฑ ุนุจุฑ `shared/permissions.ts`
- ุฑุณุงุฆู ุฎุทุฃ ุนุฑุจูุฉ ููุงุณุชุฌุงุจุงุช ุงูููุงุฌูุฉ ูููุณุชุฎุฏู
- ุงุณุชุฎุฏู `requireAuth` ู `requirePermission` middleware ุจุงูุชุธุงู

### ุฃููุงุท ููููุงุช ุงููุงุฌูุฉ
- **ููููุงุช ุซูุงุฆูุฉ ุงููุบุฉ**: ูุต ุจุงูุนุฑุจูุฉ ูุน ุงุญุชูุงุทู ุฅูุฌููุฒู
- **ุญุฏูุฏ ุงูุฃุฎุทุงุก**: ุงุณุชุฎุฏู `QueryErrorBoundary` ูุฃุฎุทุงุก API
- **ูุณุงุฑุงุช ูุญููุฉ**: ูู ุงูุตูุญุงุช ุงูุญุณุงุณุฉ ุจู `ProtectedRoute`
- **ุงูุชุญูู ูู ุงูููุงุฐุฌ**: React Hook Form + ูุญููุงุช Zod

### ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
ูุณุชุฎุฏู **Neon serverless** ูุน ุชูููู WebSocket (ูุทููุจ):
```typescript
// ุงูููุท: ุฌููุน ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุณุชุฎุฏู ุงููุฌููุนุฉ ุงูููููุฉ ูู server/db.ts
import { db } from "./db";
// ูุง ุชูุดุฆ ุงุชุตุงูุงุช ุฌุฏูุฏุฉ ูุจุงุดุฑุฉ ุฃุจุฏุงู
```

## ููุงุท ุงูุชูุงูู

### ุจููุฉ ุงูุฎุฏูุงุช
ุงูุฎุฏูุงุช ุงูุฑุฆูุณูุฉ ูู `server/services/`:
- `notification-manager.ts` - ุชูุจููุงุช ุงููุธุงู ูู ุงูููุช ุงููุนูู
- `ml-service.ts` - ุชุญูููุงุช ูุฏุนููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- `meta-whatsapp.ts` - ุชูุงูู ูุงุชุณุงุจ
- `data-validator.ts` - ูุฑุถ ููุงุนุฏ ุงูุนูู

### ุงูุชุจุนูุงุช ุงูุฎุงุฑุฌูุฉ
- **Google Cloud Storage** ูุฑูุน ุงููููุงุช (`server/storage.ts`)
- **Neon PostgreSQL** ููุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- **OpenAI API** ููููุฒุงุช ุงูุฐููุฉ
- **Twilio** ูุฑุณุงุฆู SMS/WhatsApp

## ุงุณุชุฑุงุชูุฌูุฉ ุงูุงุฎุชุจุงุฑ

ุงูุชุฑููุฒ ุนูู **ุงุฎุชุจุงุฑุงุช ุณูุงูุฉ ุงูุจูุงูุงุช** (`tests/data-integrity.test.ts`):
```typescript
// ุงูููุท: ุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงููุชุฒุงููุฉ ูุงูุชูุงูุงุช ุงููููุฏ
describe("๐ Data Integrity - Concurrent Operations Safety", () => {
  // ุงุฎุชุจุงุฑ ูููุฏ ุงููุฎุฒูู ูุญุฏูุฏ ุงููููุฉ ูุงูุชูุงูุงุช ุงูุญุงูุฉ
});
```

## ุงุนุชุจุงุฑุงุช ุงูุฃูุงู

- **ุชุดููุฑ ูููุงุช ุงููุฑูุฑ**: ุงูุชุดุงู ุชููุงุฆู ููููุงุช ุงููุฑูุฑ ุงููุตูุฉ ุนูุฏ ุงูุจุฏุก
- **ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช**: ุฌูุณุงุช ูุฏุนููุฉ ุจู PostgreSQL ูุน connect-pg-simple
- **ุญูู SQL**: ุฌููุน ุงูุงุณุชุนูุงูุงุช ุชุณุชุฎุฏู ุงุณุชุนูุงูุงุช Drizzle ุงููุนุงููุฉ
- **ุงูุชุฎููู**: ุชุญูู ูู ุงููุตูู ูุจูู ุนูู ุงูุตูุงุญูุงุช ุนูู ุฌููุน ุงููุณุงุฑุงุช

## ูุฎุงุทุฑ ุดุงุฆุนุฉ

1. **ESM ููุท**: ุงุณุชุฎุฏู ุงูุชุฏุงุฏุงุช `.js` ูู ุงูุงุณุชูุฑุงุฏุ ูุง CommonJS
2. **ุงููุต ุงูุนุฑุจู**: ุฌููุน ุงููุตูุต ุงูููุงุฌูุฉ ูููุณุชุฎุฏู ูุฌุจ ุฃู ุชุฏุนู ุชุฎุทูุท RTL
3. **ูุนุงููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุงูุนูููุงุช ูุชุนุฏุฏุฉ ุงูุฌุฏุงูู ุชุชุทูุจ ูุนุงููุงุช ุตุฑูุญุฉ
4. **ุฃูุงู ุงูููุน**: ุงุณุชูุฏ ูู ุฃููุงุน ูุฎุทุท Drizzle ุจุดูู ููุซู
5. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุฏู ุฏุงุฆูุงู ุฑุณุงุฆู ุฎุทุฃ ุนุฑุจูุฉ ูููุงุฌูุฉ

ุนูุฏ ุชุนุฏูู ููุทู ุงูุฅูุชุงุฌุ ุชุญูู ุฏุงุฆูุงู ูู ูููุฏ ุณูุฑ ุงูุนูู ุงูุฅูุชุงุฌู ุงูููุซูุฉ ูู `shared/schema.ts`.